1. space_check_variant.liquid

{%- unless id_call -%}
{%- assign id_call = 'callBackVariant' -%}
{%- endunless -%}
{%- if settings.swatch_design == '3' -%}
  {%- assign display_block = 'block' -%}
{%-else-%}
  {%- assign display_block = 'inline-block' -%}
{%-endif-%}
{%- if quick_view -%}
   {%- assign id_call = 'callBackVariant_quick' -%}
{%-endif-%}
{%- if quick_shop -%}
   {%- assign id_call = 'callBackVariant_quick_' | append:product.id -%}
{%-endif-%}
{%- if product.has_only_default_variant == false -%}
      {%- assign option_values = 0 -%} {%- assign option_values_2 = 0 -%} {%- assign option_values_3 = 0 -%}
 {%- for product_option in product.options_with_values -%}
      {%- if product_option.position == 1 -%}{%- assign option_values = product_option.values.size -%}
      {%- elsif product_option.position == 2 -%}{%- assign option_values_2 = product_option.values.size -%}
      {%- else -%}{%- assign option_values_3 = product_option.values.size -%}
      {%- endif -%}
 {%- endfor -%}
     {%- assign check_option2 = false -%}
     {%- assign check_option31 = false -%}
     {%- assign check_option33 = false -%}
     {%- assign check_option32 = false -%}
     {%- if option_values_2 == 1 and option_values_3 == 1 -%}{%- assign check_option31 = true -%}{%- endif -%}
     {%- if option_values_2 == 1 and option_values == 1 -%}{%- assign check_option33 = true -%}{%- endif -%}
     {%- if option_values_3 == 1 and option_values == 1 -%}{%- assign check_option32 = true -%}{%- endif -%}
     {%- if option_values_2 == 1 -%}{%- assign check_option2 = true -%}{%- endif -%}
      <style type="text/css">
        {%- if product.variants.size == 1 -%}.single-product-content .variations {    margin-bottom: 20px;}{%- endif -%}
      {%- capture min_css -%}
        {%- if product.variants.size > 1 -%}
           {%- if product.options.size == 2 -%}
              #product-{{product.id}} #{{id_call}} #gl_select_1 .basel-swatch{
                  display: none !important;
              }
              {%- for variant in product.variants -%}
                    #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }} {
                     display: {{display_block}} !important;
                    }
        {%-if variant.available == false-%}
                      {%-if check_option2 -%}
/*  thuxxx */
                          #product-{{product.id}} #{{id_call}}.bg_{{variant.option2 | handleize }} #gl_select_0 .bg_{{ variant.option1 | handleize }},
        #product-{{product.id}} #{{id_call}}.bg_{{variant.option2 | handleize }} #gl_select_0 .bg_{{ variant.option1 | handleize }} a{
                              display: none !important;
                         }
                      {%- else -%}
        /*  thuxxx */
                         #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }},
        #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }} a{
                            display: none !important;
                         }
        /*  end thuxxx */
                      {%- endif -%}
                    {%- endif -%}
              {%- endfor -%}
           {%- elsif product.options.size == 3 -%}
              #product-{{product.id}} #{{id_call}} #gl_select_1 .basel-swatch, #{{id_call}} #gl_select_2 .basel-swatch{
                  display: none !important;
              }
              {%- for variant in product.variants -%}
                   #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }},
                    #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_2 .bg_{{ variant.option3 | handleize }} {
                     display: {{display_block}} !important;
                    }
        {%- if variant.available == false -%}
                     {%- if check_option31 -%}
                             #product-{{product.id}} #{{id_call}}.bg_{{variant.option3 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_0 .bg_{{ variant.option1 | handleize }},
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option3 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_0 .bg_{{ variant.option1 | handleize }} a{
                            display: none !important;
                            }
                     {%- elsif check_option32 -%}
                           #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option3 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }},
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option3 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }} a{
                             display: none !important;
                            }
                     {%- elsif check_option33 -%}
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_2 .bg_{{ variant.option3 | handleize }},
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_2 .bg_{{ variant.option3 | handleize }} a{
                             display: none !important;
                            }
                     {%- else -%}
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }} #gl_select_1 .bg_{{ variant.option2 | handleize }} a,
                            #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} #gl_select_2 .bg_{{ variant.option3 | handleize }} a{
                            display: none !important;
                            }
                      {%- endif -%}
                  {%- endif -%}
              {%- endfor -%}
           {%- endif -%}
        {%- endif -%}
         {%- unless settings.swatch_style == '1' or settings.swatch_style == '3' -%}
               {%- if settings.color_name_check != blank -%}{%- assign _gl_color_name = settings.color_name_check | replace: ' ,', ',' | replace: ', ', ',' | split: ',' -%}{%- assign gl_color_name = _gl_color_name | downcase -%}{%-else-%}{%- assign gl_color_name = '\nathan_dt\' -%}{%-endif-%}
               {%- for option in product.options_with_values -%}
               {%- assign downcased_option = option.name | downcase -%}
               {%- assign downcased_option_check = option | downcase | prepend: '"' | append: '"' | strip -%} 
                  {%- if downcased_option == 'color' or downcased_option == 'colour' or gl_color_name contains downcased_option_check -%}
                     {% assign gl_option_index = forloop.index %}
                     {%- assign option_index = forloop.index0 -%}
                     {%- assign displayed_option_values = '' -%}
                        {%- for variant in product.variants -%}
                           {%- case gl_option_index -%}
                            {%- when 1 -%}
                            {%- assign gl_variant_color = variant.option1 -%} 
                            {%- when 2 -%}
                            {%- assign gl_variant_color = variant.option2 -%} 
                            {%- when 3 -%}
                            {%- assign gl_variant_color = variant.option3 -%} 
                           {%- endcase -%}
                           {%- if variant.featured_image.src != blank -%}
                               {%- assign option_value = variant.options[option_index] -%}
                               {%- unless displayed_option_values contains option_value -%}
                                 #product-{{product.id}} #{{id_call}} .bg_{{ gl_variant_color | handleize }}
                                 {%- if quick_shop -%},#{{id_call}} .bg_{{ gl_variant_color | handleize }}{%- endif -%} {
                                    background-image: url({%-include 'gl_image_format',cache:true,src: variant.featured_image.src , size: '118x' -%});
                                 }
                                 {%- assign displayed_option_values = displayed_option_values | join: ',' -%}
                                 {%- assign displayed_option_values = displayed_option_values | append: ',' | append: option_value -%}
                                 {%- assign displayed_option_values = displayed_option_values | split: ',' -%}
                               {%- endunless -%}
                           {%- endif -%}
                        {%- endfor -%}
                  {%- endif -%}
               {%- endfor -%} 
               {%- for image in product.images -%}
                  {% for variant in image.variants -%}
                     {%- case gl_option_index -%}
                      {%- when 1 -%}
                      {%- assign gl_variant_color = variant.option1 -%} 
                      {%- when 2 -%}
                      {%- assign gl_variant_color = variant.option2 -%} 
                      {%- when 3 -%}
                      {%- assign gl_variant_color = variant.option3 -%} 
                     {%- endcase -%}
                     {%- if product.options.size == 3 -%}
                     #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }}.bg_{{variant.option3 | handleize }} .bg_{{ gl_variant_color | handleize }} 
                     {%- if quick_shop -%},#{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }}.bg_{{variant.option3 | handleize }} .bg_{{ gl_variant_color | handleize }}{%- endif -%}{
                        background-image: url({%-include 'gl_image_format',cache:true,src: image.src , size: '118x' -%});
                     }
                     {%- elsif product.options.size == 2 -%}
                     #product-{{product.id}} #{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} .bg_{{ gl_variant_color | handleize }}
                     {%- if quick_shop -%},#{{id_call}}.bg_{{variant.option1 | handleize }}.bg_{{variant.option2 | handleize }} .bg_{{ gl_variant_color | handleize }}{%- endif -%} {
                        background-image: url({%-include 'gl_image_format',cache:true,src: image.src , size: '118x' -%});
                     }
                     {%- endif -%}
                  {%- endfor -%}
               {%- endfor -%}
            {%- endunless -%}
      {%- endcapture -%}
      {{min_css | strip_newlines | remove: "  " }}
      </style>
{%- endif -%}
<!--  end space_check_variant.liquid -->


-------------------------------------
2. product.liquid 

{%- comment -%}
  Teathemes https://teathemes.net/forums/
{%- endcomment -%}
{%- case settings.design_products -%}
   {%- when '1' -%}
      {%- assign design_products_page = "product-design-default" -%}
   {%- when '2' -%}
      {%- assign design_products_page = "product-design-alt" -%}
   {%- when '3' -%}
      {%- assign design_products_page = "product-design-sticky" -%}
   {%- when '4' -%}
      {%- assign design_products_page = "product-design-compact" -%}
   {%- endcase -%}
<div class="main-page-wrapper">
    <!-- MAIN CONTENT AREA -->
      <div class="container-fluid">
         <div class="row">
            <div class="site-content col-sm-12" role="main">
              {%- if settings.use_wishlist -%}{%- include 'nitro-wishlist' -%}{%- endif -%}
              {%- include 'product_page_area' -%}
            </div><!-- .site-content -->
            <div class="clearfix"></div>
            {%- if settings.show_related_products or settings.show_recently_products or product.metafields.meta.hashtag != blank -%}
            <div class="container related-and-upsells">
              {%- if settings.show_related_products -%}
                  {%- if settings.related_image_size != blank -%}{%- assign crop_nt = settings.related_image_size -%}{%- endif -%}
                  {%- assign loop_countdown = settings.loop_related_countdown -%}
                  {%- case settings.related_products_use -%}
                     {%- when 'use_collection' -%}
                        {%- include 'related-products-sectioned' -%}
                     {%- when 'handle' -%}
                        {%- include 'related-products-by-handle' -%}
                     {%- else -%}
                         {%- include 'related-products-by-tags' -%}
                  {%- endcase -%}
              {%-endif-%}
              {%- if settings.show_recently_products and pages['recently-viewed-products'].empty? != true -%}{%- include 'gl-recently-viewed' -%}{%-endif-%}
              {%- if product.metafields.meta.hashtag != blank and product.metafields.meta.hashtag contains '#' -%}
              <div class="basel-product-instagram">
                <p class="product-instagram-intro">{{ 'products.product.instagram_intro_html' | t: has_tag: product.metafields.meta.hashtag }}</p>
                <div id="carousel-{{product.id}}" class="instagram-widget instagram-per-row-4"><ul class="instagram-pics"></ul></div>
              </div>
              {%- elsif product.metafields.meta.username != blank -%}
              <div class="basel-product-instagram">
                <p class="product-instagram-intro">{{ 'products.product.instagram_intro_html' | t: has_tag: product.metafields.meta.username }}</p>
                <div id="carousel-{{product.id}}" class="instagram-widget instagram-per-row-4"><ul class="instagram-pics"></ul></div>
              </div>
              {%- endif -%}
            </div>
            {%-endif-%}
         </div><!-- end row -->
      </div><!-- end container -->
      <!-- end container -->
</div><!-- .main-page-wrapper -->

{%- unless product.variants.size == 1 and sold_out -%}
{% if linklists[product.handle].links.size == 0 and product.variants.size > 1 %}
{%- if product.options.size == 3 -%}
   {%- assign check_variant_one = false -%}
   {%- for variant in product.variants -%}
      {% if forloop.first == true %}
          {%- assign check_variant_title = variant.option2 -%}
      {% endif %}
      {% if forloop.index == 2 and check_variant_title == variant.option2 %}
          {%- assign check_variant_one = true -%}
          {%- break -%}
      {% endif %}
   {%- endfor -%}
{%- endif -%}
  <script type="text/javascript">
    (function($) {
      "use strict";
      var featured_image_id = null,$variantId,cout=0;
      var selectCallback = function(variant, selector) {
        var $variantQuantity = $('#variantQuantity'),
            $productPrice = $('#productPrice'),
            $quantityElements = $('#shopify_quantity'),
            $outofstock = $('#out-of-stock-gl'),
            $productsku = $('#product-sku'),
            $input = $('#shopify_quantity input.qty'),
            $addToCart = $('#shopify_add_to_cart');
            {%- if product.has_only_default_variant == false %}
               {%- if product.options.size == 2 -%}
                $('#callBackVariant').attr('class','bg_'+ $('#product-select-option-0').val());
               $('#callBackVariant').addClass('bg_' + $('#product-select-option-1').val());
               {%- elsif product.options.size == 3 -%}
                $('#callBackVariant').attr('class','bg_'+ $('#product-select-option-0').val());
                $('#callBackVariant').addClass('bg_' + $('#product-select-option-1').val());
                $('#callBackVariant').addClass('bg_' + $('#product-select-option-2').val());
               {%- endif -%}
            {%- endif %}
        if(variant){
          $variantId = variant.id;
          //$unavailable.hide();
          // Select a valid variant if available
          if (variant.available) {
            // We have a valid product variant, so enable the submit button
            // $addToCart.removeClass('disabled').prop('disabled', false);
            // $addToCart.text(theme.productStrings.add_to_cart);
            $addToCart.show();
            $quantityElements.show();
            $outofstock.hide();
            // Show how many items are left, if below 10
            {% if settings.product_quantity_message %}
            if (variant.inventory_management) {
              if (variant.inventory_quantity < 10 && variant.inventory_quantity > 0) {
                $variantQuantity.html({{ 'products.product.only_left' | t: count: '1' | json }}.replace('1', variant.inventory_quantity)).addClass('is-visible');
              } else if (variant.inventory_quantity <= 0 && variant.incoming) {
                $variantQuantity.html({{ 'products.product.will_not_ship_until' | t: date: '[date]' | json }}.replace('[date]', {{variant.next_incoming_date | date: format: 'day_month_year' | json }})).addClass('is-visible');
              } else {
                $variantQuantity.removeClass('is-visible');
              }
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            {% endif %}
            // Update quantity.
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
               $addToCart.html({{ 'products.product.pre_orders' | t | json }});
            }else{
              $addToCart.html({{ 'products.product.add_to_cart' | t | json }});
            }
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
                         $input.attr('max',999);
                      }
                     else if(variant.inventory_management != null ){
                       //Check if inventory management by shopify
                       $input.attr('max',variant.inventory_quantity).val(1).attr('value',1);
                     }else{
                       $input.attr('max',999);
                     }

          } else {
            // Variant is sold out, disable the submit button
            // $addToCart.addClass('disabled').prop('disabled', true);
            $addToCart.hide();
            $variantQuantity.removeClass('is-visible');
            if (variant.incoming) {
              $variantQuantity.html({{ 'products.product.will_be_in_stock_after' | t: date: '[date]' | json }}.replace('[date]', variant.next_incoming_date)).addClass('is-visible');
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            $quantityElements.hide();
            $outofstock.show();
            {%- if product.options.size == 2 -%}
            if($('#gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('[data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('[data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('[data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('[data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
          }
           // Update price display.
          var customPrice = Shopify.formatMoney(variant.price, theme.moneyFormat);
          if (variant.compare_at_price > variant.price) {
            var comparePrice = Shopify.formatMoney(variant.compare_at_price, theme.moneyFormat);
            var customPriceFormat = ' <del id="old-product-price">' + comparePrice + '</del>';
                customPriceFormat += ' <ins id="product-price">' + customPrice + '</ins>';
            $productPrice.html(customPriceFormat);
          }else{
             $productPrice.html(customPrice);
          }
          jQuery('.currency .active').trigger('click');
          //Update sku
          if(variant.sku){
             $productsku.text(variant.sku);
          }else{
              $productsku.text(theme.strings.na);
           }
          
          if(variant.featured_image) {
            featured_image_id = variant.featured_image.id;
            $('.product-nathan-{{product.id}}').addClass('featured_image').removeClass('not_featured_image');
          }else{
            featured_image_id = null;
            $('.product-nathan-{{product.id}}').addClass('not_featured_image').removeClass('featured_image');
          }
        }else{
          $variantId = null;
            {%- if product.options.size == 2 -%}
            if($('#gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('[data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('[data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('[data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('[data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
            $productsku.html(theme.strings.na);
        }
      };
      
      {%- include 'json_arr' -%}
      var product = {{ json_arr | strip_newlines | remove:"  "}};
    {%- if settings.product_quantity_message -%}
      {%- for variant in product.variants -%}
        product.variants[{{ forloop.index0}}].incoming = {{ variant.incoming | default: false }};
        product.variants[{{ forloop.index0}}].next_incoming_date = {{ variant.next_incoming_date | date: format: 'month_day_year' | json }};
      {%- endfor -%}
    {%- endif -%}
  
    var optionSelectors = new Shopify.OptionSelectors('product-select', {
      product: product,
      onVariantSelected: selectCallback,
      enableHistoryState: true
    });
    var $variation_form = $('.variations_form'),
        $check = true;
    $variation_form.on('click', '.swatches-select > .basel-swatch', function(e) {
         e.preventDefault();
         e.stopImmediatePropagation();
      e.stopPropagation()
      console.log('hi');
        var value = $(this).data('value'),
            id = $(this).parent().data('id'),
            $product = $('.single-product-page'),
            $thumbs = $('.images .thumbnails');
        $variation_form.find('select#product-select-option-' + id).val(value).trigger('change');
        $(this).parent().find('.active-swatch').removeClass('active-swatch');
        $(this).addClass('active-swatch');
        
        if( $(this).hasClass('bg_color') && $product.hasClass('gl_group_variant_images') ) {
           var url = '{{product.url}}?variant='+$variantId,
               $thumbs = $('.images .thumbnails'),
               $productGallery = $('.shopify-product-gallery');
            $.ajax({
                url: url+'&view=ajax',
                dataType: 'html',
                method: 'GET',
                beforeSend: function(data){
                 $.blockUI({
                    message: null,
                    css: {
                      backgroundColor: '#fff',
                      opacity: 0.6
                    }
                  });
               },
              success: function(data) {
                if ($thumbs.hasClass('slick-initialized')) {
                  $("#gl_thum").trigger('destroy.owl.carousel');
                  $thumbs[0].slick.unslick();
                } else {
                {%- if settings.thumbnails_position == 'left' or settings.thumbnails_position == 'bottom' -%}
                  $("#gl_thum,#gl_thumbnails").trigger('destroy.owl.carousel');
                  {%- endif -%}
                }
                $("#gl_thum,#gl_thumbnails").html("");
                $('#gl_thum').html(data);
              },
              error: function(data) {
                console.log('ajax error');
              },
              complete: function() {
                  baselThemeModule.productImagesGallery();
                  if( $productGallery.hasClass( 'image-action-zoom')) {
                      var zoom_target   = $( '.shopify-product-gallery__image' );
                      var image_to_zoom = zoom_target.find( 'img' );

                      // But only zoom if the img is larger than its container.
                      if ( image_to_zoom.attr( 'width' ) > $( '.shopify-product-gallery' ).width() ) {
                          zoom_target.trigger( 'zoom.destroy' );
                          zoom_target.zoom({
                              touch: false
                          });
                      }
                  }
                  {%- case settings.design_products -%}
                   {%- when '3' -%}
                      baselThemeModule.stickyDetails();
                   {%- when '4' -%}
                      baselThemeModule.productCompact();
                  {%- endcase -%}
                  setTimeout(function() {
                    {%- if settings.thumbnails_position == 'left' -%}
                    if ($thumbs.hasClass('slick-initialized')) {
                      $thumbs[0].slick.refresh();
                    }
                    {%- endif-%}
                    $.unblockUI();
                  }, 200);
              },
            });
          } 
         if( $product.hasClass('not_featured_image')) {
               console.log('not_featured_image');
                if( $(this).hasClass('bg_color')) {
                  var add_image_id = $(this).data('image-id');
                }else {
                  var add_image_id = $('#product-{{product.id}} .basel-swatch.bg_color.active-swatch').data('image-id');
                }
                //console.log(add_image_id); 
               $thumbs.find('div:not(.active-thumb) img[data-image-id="'+add_image_id+'"]').trigger('click');
         }else if( $product.hasClass('featured_image')) {
            $thumbs.find('div:not(.active-thumb) img[data-image-id="'+featured_image_id+'"]').trigger('click');
         }
    });
    {%- if settings.use_clicking_variant_image and settings.design_products != '3' -%}
      $(document).on('click', '.images .thumbnails img', function(ev) {
         ev.preventDefault();
          var $this = $(this),
              lenght = $this.data('lenght'),
              one = $this.data('one'),
              two = $this.data('two'),
              three = $this.data('three'),
              value = $this.data('variant_id');
              if(ev.which) {
                $check = false;
              }
        if (value != undefined && $check == false) {
            optionSelectors.selectVariant(value);
           {% if settings.swatch_design != '3' -%}
              $('#cart-form .basel-swatch.active-swatch').removeClass('active-swatch');
           {%- else -%}
              $('#cart-form .basel-swatch.active-swatch').removeClass('active-swatch current-item');
           {%- endif -%}
            {%- if product.options.size == 1 -%}
              {%- if settings.swatch_design != '3' -%}
               $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
               {%- else -%}
               $('#gl_select_0 .input-dropdown-inner >a').text(one);
               $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
               {%- endif -%}
            {%- elsif product.options.size == 2 -%}
              {%- if settings.swatch_design != '3' -%}
                $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
              {%- else -%}
                 $('#gl_select_0 .input-dropdown-inner >a').text(one);
                 $('#gl_select_1 .input-dropdown-inner >a').text(two);
                 $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                 $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
              {%- endif -%}
            {%- elsif product.options.size == 3 -%}
              {%- if settings.swatch_design != '3' -%}
                $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                $('#gl_select_2 [data-value="'+three+'"]').addClass('active-swatch');
              {%- else -%}
                 $('#gl_select_0 .input-dropdown-inner >a').text(one);
                 $('#gl_select_1 .input-dropdown-inner >a').text(two);
                 $('#gl_select_2 .input-dropdown-inner >a').text(three);
                 $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                 $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                 $('#gl_select_2 [data-value="'+three+'"]').addClass('active-swatch current-item');
              {%- endif -%}
            {%- endif -%}
        }
        $check = true;
      });
    var $mainOwl = $('.shopify-product-gallery__wrapper'),
        $thumbs = $('.images .thumbnails');
         $mainOwl.on('dragged.owl.carousel', function(e) {
        var i = e.item.index;
        //console.log(i);
        $check = false;
         $thumbs.find('img').eq(i).trigger('click');
    });
    {%- elsif settings.use_clicking_variant_image -%}
    $(document).on('click', '.shopify-product-gallery__wrapper .shopify-product-gallery__image', function(ev) {
       ev.preventDefault();
        var $this = $(this),
            lenght = $this.data('lenght'),
            one = $this.data('one'),
            two = $this.data('two'),
            three = $this.data('three'),
            value = $this.data('variant_id');
            if(ev.which) {
                $check = false;
              }
       //console.log(value);
      if (value != undefined && $check == false) {
         optionSelectors.selectVariant(value);
         {%- if settings.swatch_design != '3' -%}
            $('#cart-form .basel-swatch.active-swatch').removeClass('active-swatch');
         {%- else -%}
            $('#cart-form .basel-swatch.active-swatch').removeClass('active-swatch current-item');
         {%- endif -%}
          {%- if product.options.size == 1 -%}
             {%- if settings.swatch_design != '3' -%}
             $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
             {%- else -%}
             $('#gl_select_0 .input-dropdown-inner >a').text(one);
             $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
             {%- endif -%}
          {%- elsif product.options.size == 2 -%}
              {%- if settings.swatch_design != '3' -%}
                 $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                 $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
               {%- else -%}
                  $('#gl_select_0 .input-dropdown-inner >a').text(one);
                  $('#gl_select_1 .input-dropdown-inner >a').text(two);
                  $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                  $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
               {%- endif -%}
          {%- elsif product.options.size == 3 -%}
              {%- if settings.swatch_design != '3' -%}
                 $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                 $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                 $('#gl_select_2 [data-value="'+three+'"]').addClass('active-swatch');
               {%- else -%}
                  $('#gl_select_0 .input-dropdown-inner >a').text(one);
                  $('#gl_select_1 .input-dropdown-inner >a').text(two);
                  $('#gl_select_2 .input-dropdown-inner >a').text(three);
                  $('#gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                  $('#gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                  $('#gl_select_2 [data-value="'+three+'"]').addClass('active-swatch current-item');
               {%- endif -%}
          {%- endif -%}
      }
      $check = true;
    });
    {%- endif -%}
    }(jQuery));
  </script>
{% elsif linklists[product.handle].links.size > 0 %}
  <script>
  jQuery(function($) {
   $( document ).on('click', '#multi-variant-add', function(e) {
      e.preventDefault();
      var $this = $(this);
      $this.attr('disabled', 'disabled').css('pointer-events', 'none').addClass('loading');
      Shopify.queue = [];
      jQuery('.gl_group_quantity').each(function() {
      Shopify.queue.push({
          variantId: jQuery(this).data('variant_id'),
          quantity: parseInt(jQuery(this).val(), 10) || 0
        });
      });
      Shopify.moveAlong = function() {
        // If we still have requests in the queue, let's process the next one.
        console.log(Shopify.queue);
        if (Shopify.queue.length) {
          var request = Shopify.queue.shift();
          $.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: {quantity: request.quantity, id:request.variantId},
            dataType: 'json',
            success:function(cart) {
              Shopify.moveAlong();
            },
            error: function(XMLHttpRequest, textStatus) {
              $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
              baselThemeModule.onError(XMLHttpRequest, textStatus);
            }
         });
        }
        // If the queue is empty, we will redirect to the cart page.
        else {
            jQuery.get('/cart?view=json', function(data) {
               /*optional stuff to do after success */
               $('.widget_shopping_cart_content').html(data);
             });
           jQuery.getJSON('/cart.js', function(cart) {
              $(".cartCount").html(cart.item_count);
              $(".basel-cart-subtotal >span").html(Shopify.formatMoney(cart.total_price, theme.moneyFormat));
            });
           $('.currency .active').trigger('click');
          baselThemeModule.addToCart();
          $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
        }
      };
      Shopify.moveAlong();
    });
  });
  </script>
{% endif %}
{%- endunless -%}
{%- if product.metafields.meta.hashtag != blank or product.metafields.meta.hashtag contains '#' -%}
{%- assign hastag = product.metafields.meta.hashtag | split:'#' | last -%}
<script type="text/javascript">
  var tag = 'explore/tags/{{hastag}}',
      limit = '8',
      target = '_self',
      ul_ins = $(".instagram-pics");
    $.ajax({
      url: 'https://fontify.teathemes.net/instagram?username='+tag,
      dataType: 'json',
      type: 'GET',
      success: function(responsive) {
        //console.log(responsive);
        var html = '',
            data = responsive.entry_data.TagPage[0].graphql.hashtag.edge_hashtag_to_media.edges;
        $.each(data,function(index,element){
          if(index >= limit ) return 0;
          html += '<li><a href="//instagram.com/p/'+element.node.shortcode+'" target="'+target+'"></a><div class="wrapp-pics"><img src="'+element.node.thumbnail_src+'" alt="'+tag+'"><div class="hover-mask"></div></div></li>';
        });
        ul_ins.html(html);
      },
      error: function(data) {
        console.log('ajax error');
      }
    }); 
</script>
{%- elsif product.metafields.meta.username != blank -%}
<script type="text/javascript">
  var user_name = '{{product.metafields.meta.username}}',
      limit = '8',
      target = '_self',
      ul_ins = $(".instagram-pics");
    $.ajax({
      url: 'https://fontify.teathemes.net/instagram?username='+user_name,
      dataType: 'json',
      type: 'GET',
      success: function(responsive) {
        //console.log(responsive);
        var html = '',
            data = responsive.entry_data.ProfilePage[0].user.media.nodes;
        $.each(data,function(index,element){
          if(index >= limit ) return 0;
          html += '<li><a href="//instagram.com/p/'+element.code+'" target="'+target+'"></a><div class="wrapp-pics"><img src="'+element.thumbnail_src+'" alt="'+user_name+'"><div class="hover-mask"></div></div></li>';
        });
        ul_ins.html(html);
      },
      error: function(data) {
        console.log('ajax error');
      }
    }); 
</script>
{%- endif -%}
<script type="text/javascript">
  jQuery(function(a) {
   a("body").on("init", ".sp-tabs-wrapper, .shopify-tabs", function() {
        a(".sp-tab, .shopify-tabs .panel:not(.panel .panel)").hide();
        var b = window.location.hash
          , c = window.location.href
          , d = a(this).find(".sp-tabs, ul.tabs").first();
        b.toLowerCase().indexOf("comment-") >= 0 || "#reviews" === b || "#tab-reviews" === b ? d.find("li.reviews_tab a").click() : c.indexOf("comment-page-") > 0 || c.indexOf("cpage=") > 0 ? d.find("li.reviews_tab a").click() : d.find("li:first a").click()
    }).on("click", ".sp-tabs li a, ul.tabs li a", function(b) {
        b.preventDefault();
        var c = a(this)
          , d = c.closest(".sp-tabs-wrapper, .shopify-tabs")
          , e = d.find(".sp-tabs, ul.tabs");
        e.find("li").removeClass("active"),
        d.find(".sp-tab, .panel:not(.panel .panel)").hide(),
        c.closest("li").addClass("active"),
        d.find(c.attr("href")).show()
    }),
    void a(".sp-tabs-wrapper, .shopify-tabs").trigger("init")
});
  $(document).on("click",".shopify-product-rating", function(e) {  
    var anchor = $(this);     
    jQuery(".reviews_tab > a").trigger("click");
    setTimeout(function() {
        window.scrollTo(0, 0);
    }, 1);
    setTimeout(function() {
        $('html, body').stop().animate({
            scrollTop: $(anchor.attr('href')).offset().top - 100
        }, 400);
    }, 10);
    e.preventDefault();      
  });
Shopify.Image.preload({{ product.images | json }});
</script>
{%- if settings.show_real_time_visitor -%}
<script type="text/javascript">
  jQuery(function(a){var min = 1,max = {{settings.real_time_max}},t=1,r={{settings.real_time_max}};
         t=Math.ceil(t),
         r=Math.floor(r);
         var o=Math.floor(Math.random()*(r-t+1))+t,
         n=["1","2","4","3","6","10","-1","-3","-2","-4","-6"],
         h="",e="",l=["10","20","15"],h="",e="",M="";
         setInterval(function(){
            if(h=Math.floor(Math.random()*n.length),e=n[h],o=parseInt(o)+parseInt(e),min>=o){
               M=Math.floor(Math.random()*l.length);
               var a=l[M];o+=a
            }
            if(o<1 || o>max ){
               o=Math.floor(Math.random()*(r-t+1))+t;
            }
            jQuery("#number_counter>span").html((parseInt(o)));jQuery('.fake_counter_real_time').show()
         },{{settings.real_interval_time}}000)
      });
</script>
{%- endif -%}


<!--  end product.liquid -->
----------------------------------------

3. product.quick_view.liquid

{%- layout none -%}
{%- assign loop_countdown = settings.loop_show_countdown -%}
{%- include 'space_check_variant',quick_view:true -%}
{%- if settings.use_wishlist -%}{%- include 'nitro-wishlist' -%}{%- endif -%}
 {%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
  {%- if current_variant.compare_at_price > current_variant.price -%}
  {%- assign on_sale = true -%}
  {%- endif -%}
  {%- assign sold_out = true -%}
  {%- if current_variant.available -%}
  {%- assign sold_out = false -%}
  {%- endif -%}
  {%- if settings.color_name_check != blank -%}{%- assign _gl_color_name = settings.color_name_check | replace: ' ,', ',' | replace: ', ', ',' | split: ',' -%}{%- assign gl_color_name = _gl_color_name | downcase -%}{%-else-%}{%- assign gl_color_name = '\nathan_dt\' -%}{%-endif-%}
  {%- for option in product.options_with_values -%}
     {%- assign downcased_option = option.name | downcase -%}
     {%- assign downcased_option_check = option.name | downcase | prepend: '"' | append: '"' | strip -%} 
     {%- if downcased_option == 'color' or downcased_option == 'colour' or gl_color_name contains downcased_option_check -%}
       {%- assign colour_count = option.values.size | plus:0 -%}
     {%- endif -%}
  {%- endfor -%}
  {%- case settings.countdown_style -%}
      {%- when 'light' -%}
        {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-standard' -%} 
      {%- when 'dark' -%}
        {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-standard' -%}
      {%- when 'transparent_1' -%}
        {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-transparent' -%}
     {%- when 'transparent_2' -%}
        {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-transparent' -%}
  {%- endcase -%}
  {%- if settings.show_share_btn and settings.share_type == '1' -%}
      {%- assign gl_follow_social = false -%}
   {%- elsif settings.show_share_btn and settings.share_type == '2' -%}
      {%- assign gl_follow_social = true -%}
   {%- endif -%}
  {%- include 'check_not_feature_img' -%}
  {%- if settings.show_grouped_variant_image and product.images.size > 1 and product.has_only_default_variant == false and not_group == false -%}{%- include 'check_position_feature_img' -%}{%-endif-%}
  <div class="nathan_style_{{settings.button_art_to_cart_style}} product-quick-view single-product-content{%- if product.metafields.meta.video contains 'youtube' or product.metafields.meta.video contains 'vimeo' %} product-with-attachments{%- endif %}{%- if linklists[product.handle] != blank %} product-type-grouped{%- endif %}{%- if settings.show_grouped_variant_image and product.images.size > 1 and product.has_only_default_variant == false and not_group == false %} gl_group_variant_images{%- endif -%}" id="gl_product_quickview">
    <div class="row{%- if product.images.size > 0 %} product-image-summary{%- endif -%}" id="product-{{product.id}}">
         <div class="col-md-6 col-sm-6 col-xs-12 product-images">
           <div class="images">
             <div class="product-images-slider text-center{%- if product.images.size > 1 %} product-images-slider_on{%- endif -%}">
             {%- if product.images.size > 0 -%}
               {%- if current_variant.featured_image != blank -%}
                  {%- assign image = current_variant.featured_image -%}
                  {%- assign image_width = image.width -%}
                  {%- if image_width > 870 -%}
                     {%- assign img_width = 870 -%}
                     {%- assign product_image_size = '870x' -%}
                     {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                  {%- else -%}
                     {%- assign img_width = image_width -%}
                     {%- assign product_image_size = img_width | append: 'x' -%}
                     {%- assign img_height = image.height -%}
                  {%- endif -%}
                  {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                     {%- for variant in image.variants -%}
                        <figure class="shopify-product-gallery__image">
                        <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                           srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                           {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                            {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                            {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                            {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                            {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                            {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                        </figure>
                     {%- endfor -%}
                  {%- else -%}
                     <figure class="shopify-product-gallery__image">
                     <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                           srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                   {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                   {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                   {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                   {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                   {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                   {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                     </figure>
                  {%- endif -%}
               {%- elsif variant_recoment == true -%}
                  {%- assign id_page = id_page | json -%}
                     {%- for image in product.images -%}
                        {%- for variant in image.variants -%}
                           {%- assign image_re_id = image.id | prepend :'"'| append: '"'-%}
                             {%- if image_re_id == id_page -%}
                             {%- assign image_width = image.width -%}
                              {%- if image_width > 870 -%}
                                 {%- assign img_width = 870 -%}
                                 {%- assign product_image_size = '870x' -%}
                                 {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                              {%- else -%}
                                 {%- assign img_width = image_width -%}
                                 {%- assign product_image_size = img_width | append: 'x' -%}
                                 {%- assign img_height = image.height -%}
                              {%- endif -%}
                                 {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                                    {%- for variant in image.variants -%}
                                       <figure class="shopify-product-gallery__image">
                                       <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                          srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                                  {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                                  {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                                  {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                                  {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                                  {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                                  {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                                       </figure>
                                    {%- endfor -%}
                                 {%- else -%}
                                    <figure class="shopify-product-gallery__image">
                                    <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                          srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                                  {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                                  {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                                  {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                                  {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                                  {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                                  {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                                    </figure>
                                 {%- endif -%}
                              {%- assign current_variant_re_nt = image -%}
                             {%- endif -%}
                        {%- endfor- %}
                     {%- endfor -%}
               {%- endif -%}
               {%- if product.images.size > 0 -%}
                  {%- assign index = 0 -%}
                  {%- for image in product.images -%}
                     {%- unless current_variant.featured_image == image or current_variant_re_nt == image -%}
                     {%- assign image_width = image.width -%}
                     {%- if image_width > 870 -%}
                        {%- assign img_width = 870 -%}
                        {%- assign product_image_size = '870x' -%}
                        {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                     {%- else -%}
                        {%- assign img_width = image_width -%}
                        {%- assign product_image_size = img_width | append: 'x' -%}
                        {%- assign img_height = image.height -%}
                     {%- endif -%}
                        {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                           {%- for variant in image.variants -%}
                              <figure class="shopify-product-gallery__image">
                              <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                 srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                         {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                         {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                         {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                         {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                         {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                         {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                              </figure>
                           {%- endfor -%}
                        {%- else -%}
                           <figure class="shopify-product-gallery__image">
                           <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                              srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                      {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                      {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                      {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                      {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                      {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                      {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                           </figure>
                        {%- endif -%}
                     {%- endunless -%}
                  {%- endfor -%}
               {%- endif -%}
             {%- else -%}
               <img src="https://placehold.it/870x1110" alt ="placehold">
             {%- endif -%} 
             </div>
           </div>
           <a href="{{ product.url | within: collection }}" class="view-details-btn">{{ 'products.product.product_view_details' | t }}</a>     
         </div>
      <div class="{%- if product.images.size > 0 -%}col-md-6 col-sm-6{%- endif %} col-xs-12 summary entry-summary">
        <div class="summary-inner basel-scroll">
          <div class="basel-scroll-content">
            <h1 class="product_title entry-title"><a href="{{ product.url | within: collection }}">{{ product.title }}</a></h1>
           {%- if settings.show_product_page_rating -%}
           <div class="shopify-product-rating">
             <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
           </div>
           {%- endif -%}
           <div>
               <p class="price"{%- unless product.price_varies %} id="productPrice"{%- endunless -%}>
                 {%- if linklists[product.handle] == empty or linklists[product.handle] == "" -%}
                   {%- if product.price_varies -%}
                   {{ product.price_min | money }}  {{ product.price_max | money }}
                   {%- elsif on_sale -%}<del id="old-product-price">{{current_variant.compare_at_price | money }}</del> <ins id="product-price">{{ current_variant.price | money }}</ins>
                   {%- else -%}
                   <span id="product-price">{{ current_variant.price | money }}</span> 
                   {%- endif -%}
                 {%- else -%}
                   {%- if on_sale -%}
                   {{ current_variant.price | money }}  {{ current_variant.compare_at_price | money }}
                   {%- else -%}
                   {{ current_variant.price | money }}
                   {%- endif -%}
                 {%- endif -%}
                 </p>
            </div>
            {%- if settings.use_description_excerpt -%}
            {%- assign _prodcut_excerpt_length = settings.prodcut_excerpt_length | plus:0 -%}
            {%- assign prodcut_excerpt_length = _prodcut_excerpt_length | default: 31 -%}
            <div>
               {%- if settings.use_description_full -%}
                  {%- include 'shortcode' load: product.description -%}
               {%-else-%}
                  <p class="p_des_ex">
                     {%- if product.metafields.meta.description_excerpt -%}
                      {{  product.metafields.meta.description_excerpt | strip }}
                    {% elsif product.description contains  '[' %}
                      {% assign pr_des = product.description | split: '[' %}
                      {% assign pr_des = pr_des[1] | split: ']' | first | append:']' | prepend:'[' %}
                      {{ product.description | remove: pr_des | strip_html | truncatewords: prodcut_excerpt_length }}
                    {%-else-%}
                      {{ product.description | strip_html | truncatewords: prodcut_excerpt_length }}
                    {%-endif-%}
                  </p>
               {%-endif-%}
            </div>
            {%- endif -%}
            {%- assign section_settings_countdown = settings.show_countdown -%}
            {%- include 'basel_count_down' -%}
            {%- unless product.options.size == 1 and product.variants[0].title == 'Default Title'-%}
               {%-capture variantSoldout-%}
               {%-for option in product.options_with_values-%}
                   {%-for value in option.values-%}
                     {% if option.selected_value == value %} bg_{{value | handleize}}{% endif-%}
                   {%-endfor-%}
               {%-endfor-%}
               {%-endcapture-%}
            {%-endunless-%}
            {%- if product.metafields.external -%}
               {%- assign check = product.metafields.external | first | last -%}
               {%- if check contains 'https:' or check  contains 'http:' -%}{%- assign check_external = true -%}{%-else-%}{%- assign check_external = false -%}{%-endif-%}
            {%-endif-%}
            {%- if product.has_only_default_variant == false or linklists[product.handle] == empty or linklists[product.handle] == "" -%}<div id="callBackVariant_quick" class="{{variantSoldout}}">{%- endif-%}
                  {%- if settings.catalog_mode == false -%}
                     {%- if settings.product_quantity_message and product.variants.size == 1 and sold_out == false -%}
                           <div id="variantQuantity_quick" class="variant-quantity{%- if current_variant.inventory_management %} show{%- endif -%}" style="margin-top: 20px">
                              {%- if current_variant.inventory_management -%}
                                 {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                    {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                 {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                    {%- assign next_incoming_date = current_variant.next_incoming_date | date: format: 'month_day_year' -%}
                                    {{ 'products.product.will_not_ship_until' | t: date:next_incoming_date }}
                                 {%- endif -%}
                              {%- endif -%}
                           </div>
                           {%- endif -%}
                     {%- if product.variants.size == 1 and sold_out -%}
                        <p class="stock out-of-stock" id="out-of-stock-gl_quick">{{ 'products.product.outofstock' | t }}</p>
                         {%- if settings.product_quantity_message -%}
                           <div id="variantQuantity_quick" class="variant-quantity{%- if current_variant.inventory_management %} show{%- endif -%}">
                              {%- if current_variant.inventory_management -%}
                                 {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                    {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                 {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                    {%- assign next_incoming_date = current_variant.next_incoming_date | date: format: 'month_day_year' -%}
                                    {{ 'products.product.will_not_ship_until' | t: date:next_incoming_date }}
                                 {%- endif -%}
                              {%- endif -%}
                           </div>
                           {%- endif -%}
                     {%- elsif linklists[product.handle] == empty or linklists[product.handle] == "" -%}
                        {%- if check_external and product.variants.size == 1 -%}
                           <p class="cart"><a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a></p>
                        {%- else -%}
                           <form class="add-to-cart-form variations_form cart{%- if settings.show_watch_products %} swatch-color-single{%- endif -%}" method="post" action="/cart/add" enctype="multipart/form-data" id="cart-form-quick" data-product_id="{{product.id}}">
                              <select name="id" id="product-select-quick" class="product-form__variants hide hidden">
                               {%- for variant in product.variants -%}
                               <option  data-sku="{{ variant.sku }}" data-index="{{ forloop.index0 }}" data-option1="bg_{{ variant.option1 | handleize}}" data-option2="bg_{{ variant.option2 | handleize }}" data-option3="bg_{{ variant.option3 | handleize}}" value="{{ variant.id }}"{%- if variant == current_variant %} selected="selected"{%- endif -%}>{{ variant.title }}</option>
                               {%- endfor -%}
                             </select>
                              {%- if product.has_only_default_variant == false and settings.swatch_design != '3' -%}{%- include 'swatch' -%}{%- elsif product.has_only_default_variant == false and settings.swatch_design == '3' -%}{%- include 'swatch_simple' -%}{%- endif -%}
                              {%- if product.variants.size > 1 -%}
                                 <div class="single_variation_wrap">
                                    {%- if product.price_varies -%}
                                    <div class="shopify-variation single_variation">
                                        <div class="shopify-variation-price">
                                          <span class="price" id="productPrice_quick">
                                            {%- if on_sale -%}<del id="old-product-price_quick">{{ current_variant.compare_at_price | money }}</del><ins id="product-price_quick">{{ current_variant.price | money }}</ins>
                                            {%- else -%}
                                            <span id="product-price">{{ current_variant.price | money }}</span> 
                                            {%- endif -%}
                                          </span>
                                        </div>
                                     </div>
                                     {%- endif -%}
                                    {%- if settings.product_quantity_message -%}
                                       <div id="variantQuantity_quick" class="variant-quantity{%- if product.has_only_default_variant and current_variant.inventory_management %} show{%- endif -%}">
                                          {%- if product.has_only_default_variant and current_variant.inventory_management -%}
                                             {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                                {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                             {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                                {{ 'products.product.will_not_ship_until' | t: date: current_variant.next_incoming_date }}
                                             {%- endif -%}
                                          {%- endif -%}
                                       </div>
                                       {%- endif -%}
                                   <div class="shopify-variation-add-to-cart variations_button shopify-variation-add-to-cart-enabled">
                                       <div id="shopify_quantity_quick" class="quantity">
                                          <input type="button" value="-" class="minus">
                                          <input type="number" step="1" min="1" max="{%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != null -%}999{%- elsif current_variant.inventory_management != null -%}{{current_variant.inventory_quantity}}{%- else -%}999{%- endif -%}" name="quantity" value="1" title="Qty" class="input-text qty text" size="4" pattern="[0-9]*" inputmode="numeric">
                                          <input type="button" value="+" class="plus">
                                       </div>
                                       <p class="stock out-of-stock variant_stock" id="out-of-stock-gl_quick" style="display: none">{{ 'products.product.outofstock' | t }}</p>
                                       {% comment %}<input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ get_group_handle }}">{% endcomment %}
                                       {%- if check_external == false -%}
                                          {% if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != '' %}
                                          <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.pre_orders' | t }}</button>
                                          {%- else -%}
                                          <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                                          {%- endif -%}
                                       {%- else -%}
                                       <a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                                       {%- endif -%}
                                    </div>
                                 </div>
                                 {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}{%- include 'product_img_trust_seal',padding_class:'gl_pt_25' -%}{%- endif -%}
                              {%- else -%}
                                 {%- if settings.product_quantity_message -%}
                                    <div id="variantQuantity" class="variant-quantity{%- if product.has_only_default_variant and current_variant.inventory_management %} show{%- endif -%}">
                                       {%- if product.has_only_default_variant and current_variant.inventory_management -%}
                                          {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                             {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                          {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                             {{ 'products.product.will_not_ship_until' | t: date: current_variant.next_incoming_date }}
                                          {%- endif -%}
                                       {%- endif -%}
                                    </div>
                                 {%- endif -%}
                                 <div id="shopify_quantity" class="quantity">
                                    <input type="button" value="-" class="minus">
                                    <input type="number" step="1" min="1" max="{%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != null -%}999{%- elsif current_variant.inventory_management != null -%}{{current_variant.inventory_quantity}}{%- else -%}999{%- endif -%}" name="quantity" value="1" title="Qty" class="input-text qty text" size="4" pattern="[0-9]*" inputmode="numeric">
                                    <input type="button" value="+" class="plus">
                                 </div>
                                 <p class="stock out-of-stock variant_stock" id="out-of-stock-gl" style="display: none">{{ 'products.product.outofstock' | t }}</p>
                                 {% comment %}<input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ get_group_handle }}">{% endcomment %}
                                 {%- if check_external == false -%}
                                    {%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != '' -%}
                                     <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.pre_orders' | t }}</button>
                                     {%- else -%}
                                     <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                                     {%- endif -%}
                                 {%- else -%}
                                 <a href="{{ check }}" id="shopify_add_to_cart_quick" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                                 {%- endif -%}
                              {%- endif -%}
                           </form>
                        {%- endif -%}
                     {%- else -%}
                        <form class="cart" method="post" enctype="multipart/form-data">
                           <table cellspacing="0" class="group_table">
                              <tbody>
                              {%- include 'product_group' -%}
                              </tbody>
                           </table>
                           <!-- <input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ product.handle }}"> -->
                           {%- if check_external == false -%}
                            <button type="submit" id="multi-variant-add" class="add_to_cart_button single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                           {%- else -%}
                           <a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                           {%- endif -%}
                        </form>
                        {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}{%- include 'product_img_trust_seal',padding_class:'gl_mb_20' -%}{%- endif -%}
                     {%- endif -%}
               {%- endif -%}
               {%- if settings.use_wishlist and pages['wishlist'].empty? != true -%}{%- include 'gl-wishlist-product' -%}{%- endif -%}
                  <div class="clear"></div>
                  {%- if settings.use_compare and pages['compare'].empty? != true -%}<div class="compare-btn-wrapper{%- if product.variants.size == 1 and sold_out %} gl_mb_25{%- endif -%}"><a href="#compare_popup" class="compare button" data-pid="{{product.handle}}_sp_{{product.id}}" rel="nofollow">{{ 'products.product.compare' | t }}</a></div>{%- endif -%}
                  {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}
                            {%- if product.variants.size == 1 or check_external -%}{%- include 'product_img_trust_seal',padding_class:'gl_pt_15' -%}{%- endif -%}
                           {%- endif -%}
                  <div class="product_meta{%- if check_external %} product_meta_external{%- endif -%}">
                     {%- if settings.show_sku -%}<span class="sku_wrapper">{{ 'products.product.product_sku' | t }} <span class="sku variant-sku" id="product-sku_quick">{%- if current_variant.sku != blank -%}{{current_variant.sku}}{%-else-%}{{ 'products.product.na' | t }}{%-endif-%}</span></span>{%- endif -%}
                     {%- if product.collections.size > 0 and settings.show_category_product -%}
                     <span class="posted_in">{{ 'products.product.product_category' | t }} 
                     {% for collection in product.collections limit:10 -%}
                       {{ collection.title | link_to: collection.url }}{%- unless forloop.last == true -%},{%- endunless %}
                       {%- endfor -%}
                     </span>
                     {%- endif -%}
                     {%- if product.tags.size > 0 and settings.show_tag_product and product.collections.size > 0 -%}
                     <span class="tagged_as">{{ 'products.product.product_tag' | t }}
                        {%- for tag in product.tags limit:10 -%}
                        <a href="{%- if collection != blank -%}{{ collection.url }}{%- else -%}{{ product.collections.first.url }}{%- endif -%}/{{ tag | handle }}">{{ tag | remove:'type ' | remove:'Type ' }}</a>{%- unless forloop.last -%}, {% endunless -%}
                        {%- endfor -%}
                     </span>
                     {%- endif -%}
                  </div>
                  {%- if settings.show_share_btn -%}
                  <div class="product-share">
                     <span class="share-title">{{ 'products.product.product_share' | t }}</span>
                     {%- include 'social-sharing', follow_social:gl_follow_social -%}
                  </div>
                  {%- endif -%}
            {%- if product.has_only_default_variant == false or linklists[product.handle] == empty or linklists[product.handle] == "" -%}</div>{%- endif-%}
        </div>
      </div>
      <!-- .summary -->
    </div>
  </div>
  <!-- .product-quickview end -->
</div>
{%- unless product.variants.size == 1 and sold_out -%}
{% if linklists[product.handle] == blank and product.variants.size > 1 %}
  <script type="text/javascript">
    (function($) {
      "use strict";
      var featured_image_id = null,cout=0;
      var selectCallback = function(variant, selector) {
        var $variantQuantity = $('#variantQuantity_quick'),
            $productPrice = $('#productPrice_quick'),
            $quantityElements = $('#shopify_quantity_quick'),
            $outofstock = $('#out-of-stock-gl_quick'),
            $productsku = $('#product-sku_quick'),
            $input = $('#shopify_quantity_quick input.qty'),
            $addToCart = $('#shopify_add_to_cart_quick');
            {%- if product.has_only_default_variant == false %}
               {%- if product.options.size == 2 -%}
                $('#callBackVariant_quick').attr('class','bg_'+ $('#product-select-quick-option-0').val());
                $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-1').val());
               {%- elsif product.options.size == 3 -%}
                     $('#callBackVariant_quick').attr('class','bg_'+ $('#product-select-quick-option-0').val());
                     $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-1').val());
                     $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-2').val());
               {%- endif -%}
            {%- endif %}
        if(variant){
          if (variant.available) {
            $addToCart.show();
            $quantityElements.show();
            $outofstock.hide();
            // Show how many items are left, if below 10
            {% if settings.product_quantity_message %}
            if (variant.inventory_management) {
              if (variant.inventory_quantity < 10 && variant.inventory_quantity > 0) {
                $variantQuantity.html({{ 'products.product.only_left' | t: count: '1' | json }}.replace('1', variant.inventory_quantity)).addClass('is-visible');
              } else if (variant.inventory_quantity <= 0 && variant.incoming) {
                $variantQuantity.html({{ 'products.product.will_not_ship_until' | t: date: '[date]' | json }}.replace('[date]', variant.next_incoming_date)).addClass('is-visible');
              } else {
                $variantQuantity.removeClass('is-visible');
              }
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            {% endif %}
            // Update quantity.
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
               $addToCart.html({{ 'products.product.pre_orders' | t | json }});
            }else{
              $addToCart.html({{ 'products.product.add_to_cart' | t | json }});
            }
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
                         $input.attr('max',999);
                      }
                     else if(variant.inventory_management != null ){
                       //Check if inventory management by shopify
                       $input.attr('max',variant.inventory_quantity).val(1).attr('value',1);
                     }else{
                       $input.attr('max',999);
                     }

          } else {
            $addToCart.hide();
            $variantQuantity.removeClass('is-visible');
            if (variant.incoming) {
              $variantQuantity.html({{ 'products.product.will_be_in_stock_after' | t: date: '[date]' | json }}.replace('[date]', variant.next_incoming_date)).addClass('is-visible');
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            $quantityElements.hide();
            $outofstock.show();
            {%- if product.options.size == 2 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 console.log(_index);
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('#callBackVariant_quick [data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#callBackVariant_quick #gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#callBackVariant_quick #gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('#callBackVariant_quick [data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#callBackVariant_quick #gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
          }
           // Update price display.
          var customPrice = Shopify.formatMoney(variant.price, theme.moneyFormat);
          if (variant.compare_at_price > variant.price) {
            var comparePrice = Shopify.formatMoney(variant.compare_at_price, theme.moneyFormat);
            var customPriceFormat = ' <del id="old-product-price_quick">' + comparePrice + '</del>';
                customPriceFormat += ' <ins id="product-price_quick">' + customPrice + '</ins>';
            $productPrice.html(customPriceFormat);
          }else{
             $productPrice.html(customPrice);
          }
          jQuery('.currency .active').trigger('click');
          //Update sku
          if(variant.sku){
             $productsku.text(variant.sku);
          }else{
              $productsku.text(theme.strings.na);
           }
          if(variant.featured_image) {
            featured_image_id = variant.featured_image.id;
            $('#gl_product_quickview').addClass('featured_image').removeClass('not_featured_image');
          }else{
            featured_image_id = '';
            $('#gl_product_quickview').addClass('not_featured_image').removeClass('featured_image');
          }
          
        }else{
            {%- if product.options.size == 2 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 console.log(_index);
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('#callBackVariant_quick [data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#callBackVariant_quick #gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#callBackVariant_quick #gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('#callBackVariant_quick [data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#callBackVariant_quick #gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
            $productsku.html(theme.strings.na);
        }
      };
      
      {%- include 'json_arr' -%}
      var product = {{ json_arr | strip_newlines | remove:"  "}};
    {%- if settings.product_quantity_message -%}
      {%- for variant in product.variants -%}
        product.variants[{{ forloop.index0}}].incoming = {{ variant.incoming | default: false }};
        product.variants[{{ forloop.index0}}].next_incoming_date = {{ variant.next_incoming_date | date: format: 'month_day_year' | json }};
      {%- endfor -%}
    {%- endif -%}
  
    var optionSelectors = new Shopify.OptionSelectors('product-select-quick', {
      product: product,
      onVariantSelected: selectCallback,
      enableHistoryState: false
    });
    var $variation_form = $('#gl_product_quickview .variations_form');
    $variation_form.on('click', '.swatches-select > .basel-swatch', function(e) {
         e.preventDefault();
         e.stopImmediatePropagation();
        var value = $(this).data('value'),
            id = $(this).parent().data('id'),
            $product = $('.product-quick-view'),
            $thumbs = $('.product-quick-view .product-images-slider_on');
        $variation_form.find('select#product-select-quick-option-' + id).val(value).trigger('change');
        $(this).parent().find('.active-swatch').removeClass('active-swatch');
        $(this).addClass('active-swatch');
          if( $product.hasClass('not_featured_image')) {
            if( $(this).hasClass('bg_color')) {
               var add_image_id = $(this).data('image-id');
            }else {
               var add_image_id = $('#gl_product_quickview .basel-swatch.bg_color.active-swatch').data('image-id');
            }
            var i = $thumbs.find('div:not(.active) img[data-image-id="'+add_image_id+'"]').parents( ".owl-item" ).index();
            $thumbs.trigger('to.owl.carousel', i);
         }else if( $product.hasClass('featured_image')) {
            var _i = $thumbs.find('div:not(.active) img[data-image-id="'+featured_image_id+'"]').parents( ".owl-item" ).index();
            $thumbs.trigger('to.owl.carousel', _i);
         }
    });
    {%- if settings.use_clicking_variant_image -%}
    var $mainOwl = $('.product-images-slider_on');
        $mainOwl.on('dragged.owl.carousel', function(e) {
            var i = e.item.index;
             use_clicking_variant_image(i);
        });
       $mainOwl.on('click','.owl-next,.owl-prev',function(ev) {
              var i = $('.owl-item.active').index();
               use_clicking_variant_image(i)
               //$mainOwl.removeClass('move-next');
         });
        function use_clicking_variant_image(i) {
            var   $this = $mainOwl.find('img').eq(i),
                lenght = $this.data('lenght'),
                one = $this.data('one'),
                two = $this.data('two'),
                three = $this.data('three'),
                value = $this.data('variant_id');
            if (value != undefined) {
               optionSelectors.selectVariant(value);
               {%- if settings.swatch_design != '3' -%}
                  $('#cart-form-quick .basel-swatch.active-swatch').removeClass('active-swatch');
               {%- else -%}
                  $('#cart-form-quick .basel-swatch.active-swatch').removeClass('active-swatch current-item');
               {%- endif -%}
               {%- if product.options.size == 1 -%}
                  {%- if settings.swatch_design != '3' -%}
                   $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                   {%- else -%}
                   $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                   $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                   {%- endif -%}
                {%- elsif product.options.size == 2 -%}
                     {%- if settings.swatch_design != '3' -%}
                       $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                     {%- else -%}
                        $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                        $('#gl_product_quickview #gl_select_1 .input-dropdown-inner >a').text(two);
                        $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                     {%- endif -%}
               {%- elsif product.options.size == 3 -%}
                    {%- if settings.swatch_design != '3' -%}
                       $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_2 [data-value="'+three+'"]').addClass('active-swatch');
                     {%- else -%}
                        $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                        $('#gl_product_quickview #gl_select_1 .input-dropdown-inner >a').text(two);
                        $('#gl_product_quickview #gl_select_2 .input-dropdown-inner >a').text(three);
                        $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_2 [data-value="'+three+'"]').addClass('active-swatch current-item');
                     {%- endif -%}
                {%- endif -%}
            }
        };
        
        {%- endif -%}
    }(jQuery));
  </script>
{% elsif linklists[product.handle] != blank %}
  <script>
  jQuery(function($) {
   $( document ).on('click', '#multi-variant-add', function(e) {
      e.preventDefault();
      var $this = $(this);
      $this.attr('disabled', 'disabled').css('pointer-events', 'none').addClass('loading');
      Shopify.queue = [];
      jQuery('.gl_group_quantity').each(function() {
      Shopify.queue.push({
          variantId: jQuery(this).data('variant_id'),
          quantity: parseInt(jQuery(this).val(), 10) || 0
        });
      });
      Shopify.moveAlong = function() {
        // If we still have requests in the queue, let's process the next one.
        console.log(Shopify.queue);
        if (Shopify.queue.length) {
          var request = Shopify.queue.shift();
          $.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: {quantity: request.quantity, id:request.variantId},
            dataType: 'json',
            success:function(cart) {
              Shopify.moveAlong();
            },
            error: function(XMLHttpRequest, textStatus) {
              $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
              baselThemeModule.onError(XMLHttpRequest, textStatus);
            }
         });
        }
        // If the queue is empty, we will redirect to the cart page.
        else {
          jQuery.get('/cart?view=json', function(data) {
               /*optional stuff to do after success */
               $('.widget_shopping_cart_content').html(data);
            });
           jQuery.getJSON('/cart.js', function(cart) {
              $(".cartCount").html(cart.item_count);
              $(".basel-cart-subtotal >span").html(Shopify.formatMoney(cart.total_price, theme.moneyFormat));
            });
          baselThemeModule.gl_currency();
          baselThemeModule.addToCart();
          $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
        }
      };
      Shopify.moveAlong();
    });
  });
  </script>
{% endif %}
{%- endunless -%}
<!--  end product.quick_view.liquid -->
----------------------------------------------
4. product_page_area.liquid

{%- layout none -%}
{%- assign loop_countdown = settings.loop_show_countdown -%}
{%- include 'space_check_variant',quick_view:true -%}
{%- if settings.use_wishlist -%}{%- include 'nitro-wishlist' -%}{%- endif -%}
 {%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
  {%- if current_variant.compare_at_price > current_variant.price -%}
  {%- assign on_sale = true -%}
  {%- endif -%}
  {%- assign sold_out = true -%}
  {%- if current_variant.available -%}
  {%- assign sold_out = false -%}
  {%- endif -%}
  {%- if settings.color_name_check != blank -%}{%- assign _gl_color_name = settings.color_name_check | replace: ' ,', ',' | replace: ', ', ',' | split: ',' -%}{%- assign gl_color_name = _gl_color_name | downcase -%}{%-else-%}{%- assign gl_color_name = '\nathan_dt\' -%}{%-endif-%}
  {%- for option in product.options_with_values -%}
     {%- assign downcased_option = option.name | downcase -%}
     {%- assign downcased_option_check = option.name | downcase | prepend: '"' | append: '"' | strip -%} 
     {%- if downcased_option == 'color' or downcased_option == 'colour' or gl_color_name contains downcased_option_check -%}
       {%- assign colour_count = option.values.size | plus:0 -%}
     {%- endif -%}
  {%- endfor -%}
  {%- case settings.countdown_style -%}
      {%- when 'light' -%}
        {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-standard' -%} 
      {%- when 'dark' -%}
        {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-standard' -%}
      {%- when 'transparent_1' -%}
        {%- assign countdown_style = 'color-scheme-light timer-size-small timer-style-transparent' -%}
     {%- when 'transparent_2' -%}
        {%- assign countdown_style = 'color-scheme-dark timer-size-small timer-style-transparent' -%}
  {%- endcase -%}
  {%- if settings.show_share_btn and settings.share_type == '1' -%}
      {%- assign gl_follow_social = false -%}
   {%- elsif settings.show_share_btn and settings.share_type == '2' -%}
      {%- assign gl_follow_social = true -%}
   {%- endif -%}
  {%- include 'check_not_feature_img' -%}
  {%- if settings.show_grouped_variant_image and product.images.size > 1 and product.has_only_default_variant == false and not_group == false -%}{%- include 'check_position_feature_img' -%}{%-endif-%}
  <div class="nathan_style_{{settings.button_art_to_cart_style}} product-quick-view single-product-content{%- if product.metafields.meta.video contains 'youtube' or product.metafields.meta.video contains 'vimeo' %} product-with-attachments{%- endif %}{%- if linklists[product.handle] != blank %} product-type-grouped{%- endif %}{%- if settings.show_grouped_variant_image and product.images.size > 1 and product.has_only_default_variant == false and not_group == false %} gl_group_variant_images{%- endif -%}" id="gl_product_quickview">
    <div class="row{%- if product.images.size > 0 %} product-image-summary{%- endif -%}" id="product-{{product.id}}">
         <div class="col-md-6 col-sm-6 col-xs-12 product-images">
           <div class="images">
             <div class="product-images-slider text-center{%- if product.images.size > 1 %} product-images-slider_on{%- endif -%}">
             {%- if product.images.size > 0 -%}
               {%- if current_variant.featured_image != blank -%}
                  {%- assign image = current_variant.featured_image -%}
                  {%- assign image_width = image.width -%}
                  {%- if image_width > 870 -%}
                     {%- assign img_width = 870 -%}
                     {%- assign product_image_size = '870x' -%}
                     {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                  {%- else -%}
                     {%- assign img_width = image_width -%}
                     {%- assign product_image_size = img_width | append: 'x' -%}
                     {%- assign img_height = image.height -%}
                  {%- endif -%}
                  {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                     {%- for variant in image.variants -%}
                        <figure class="shopify-product-gallery__image">
                        <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                           srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                           {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                            {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                            {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                            {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                            {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                            {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                        </figure>
                     {%- endfor -%}
                  {%- else -%}
                     <figure class="shopify-product-gallery__image">
                     <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                           srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                   {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                   {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                   {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                   {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                   {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                   {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                     </figure>
                  {%- endif -%}
               {%- elsif variant_recoment == true -%}
                  {%- assign id_page = id_page | json -%}
                     {%- for image in product.images -%}
                        {%- for variant in image.variants -%}
                           {%- assign image_re_id = image.id | prepend :'"'| append: '"'-%}
                             {%- if image_re_id == id_page -%}
                             {%- assign image_width = image.width -%}
                              {%- if image_width > 870 -%}
                                 {%- assign img_width = 870 -%}
                                 {%- assign product_image_size = '870x' -%}
                                 {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                              {%- else -%}
                                 {%- assign img_width = image_width -%}
                                 {%- assign product_image_size = img_width | append: 'x' -%}
                                 {%- assign img_height = image.height -%}
                              {%- endif -%}
                                 {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                                    {%- for variant in image.variants -%}
                                       <figure class="shopify-product-gallery__image">
                                       <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                          srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                                  {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                                  {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                                  {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                                  {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                                  {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                                  {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                                       </figure>
                                    {%- endfor -%}
                                 {%- else -%}
                                    <figure class="shopify-product-gallery__image">
                                    <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                          srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                                  {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                                  {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                                  {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                                  {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                                  {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                                  {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                                    </figure>
                                 {%- endif -%}
                              {%- assign current_variant_re_nt = image -%}
                             {%- endif -%}
                        {%- endfor- %}
                     {%- endfor -%}
               {%- endif -%}
               {%- if product.images.size > 0 -%}
                  {%- assign index = 0 -%}
                  {%- for image in product.images -%}
                     {%- unless current_variant.featured_image == image or current_variant_re_nt == image -%}
                     {%- assign image_width = image.width -%}
                     {%- if image_width > 870 -%}
                        {%- assign img_width = 870 -%}
                        {%- assign product_image_size = '870x' -%}
                        {%- assign img_height = 870 | divided_by: image.aspect_ratio | round -%}
                     {%- else -%}
                        {%- assign img_width = image_width -%}
                        {%- assign product_image_size = img_width | append: 'x' -%}
                        {%- assign img_height = image.height -%}
                     {%- endif -%}
                        {%- if image.attached_to_variant? and settings.use_clicking_variant_image -%}
                           {%- for variant in image.variants -%}
                              <figure class="shopify-product-gallery__image">
                              <img data-variant_id= "{{variant.id}}" data-lenght= "{{product.options.size}}" data-one='{{ variant.option1 | handleize }}' data-two= '{{ variant.option2 | handleize }}' data-three= '{{ variant.option3 | handleize }}' data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                                 srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                         {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                         {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                         {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                         {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                         {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                         {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                              </figure>
                           {%- endfor -%}
                        {%- else -%}
                           <figure class="shopify-product-gallery__image">
                           <img data-image-id="{{image.id}}" width="{{ img_width }}" height="{{ img_height }}" src="{%-include 'gl_image_format',cache:true,src: image.src, size: product_image_size -%}" class="attachment-shop_single size-shop_single" alt="{{image.alt}}"
                              srcset="{%-include 'gl_image_format',cache:true,src: image.src , size: product_image_size %} {{ image.width }}w 
                                      {%- if image_width > 235 -%},{%-include 'gl_image_format',src: image.src , size: '235x',cache:true %} 235w{%- endif -%} 
                                      {%- if image_width > 768 -%},{%-include 'gl_image_format',src: image.src , size: '768x',cache:true %} 768w{%- endif -%}
                                      {%- if image_width > 803 -%},{%-include 'gl_image_format',src: image.src , size: '803x',cache:true %} 803w{%- endif -%} 
                                      {%- if image_width > 266 -%},{%-include 'gl_image_format',src: image.src , size: '266x',cache:true %} 266w{%- endif -%} 
                                      {%- if image_width > 219 -%},{%-include 'gl_image_format',src: image.src , size: '219x',cache:true %} 219w{%- endif -%} 
                                      {%- if image_width > 526 -%},{%-include 'gl_image_format',src: image.src , size: '526x',cache:true %} 526w{%- endif -%}" sizes="(max-width: {{ image.width }}px) 100vw, {{ image.width }}px">
                           </figure>
                        {%- endif -%}
                     {%- endunless -%}
                  {%- endfor -%}
               {%- endif -%}
             {%- else -%}
               <img src="https://placehold.it/870x1110" alt ="placehold">
             {%- endif -%} 
             </div>
           </div>
           <a href="{{ product.url | within: collection }}" class="view-details-btn">{{ 'products.product.product_view_details' | t }}</a>     
         </div>
      <div class="{%- if product.images.size > 0 -%}col-md-6 col-sm-6{%- endif %} col-xs-12 summary entry-summary">
        <div class="summary-inner basel-scroll">
          <div class="basel-scroll-content">
            <h1 class="product_title entry-title"><a href="{{ product.url | within: collection }}">{{ product.title }}</a></h1>
           {%- if settings.show_product_page_rating -%}
           <div class="shopify-product-rating">
             <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
           </div>
           {%- endif -%}
           <div>
               <p class="price"{%- unless product.price_varies %} id="productPrice"{%- endunless -%}>
                 {%- if linklists[product.handle] == empty or linklists[product.handle] == "" -%}
                   {%- if product.price_varies -%}
                   {{ product.price_min | money }}  {{ product.price_max | money }}
                   {%- elsif on_sale -%}<del id="old-product-price">{{current_variant.compare_at_price | money }}</del> <ins id="product-price">{{ current_variant.price | money }}</ins>
                   {%- else -%}
                   <span id="product-price">{{ current_variant.price | money }}</span> 
                   {%- endif -%}
                 {%- else -%}
                   {%- if on_sale -%}
                   {{ current_variant.price | money }}  {{ current_variant.compare_at_price | money }}
                   {%- else -%}
                   {{ current_variant.price | money }}
                   {%- endif -%}
                 {%- endif -%}
                 </p>
            </div>
            {%- if settings.use_description_excerpt -%}
            {%- assign _prodcut_excerpt_length = settings.prodcut_excerpt_length | plus:0 -%}
            {%- assign prodcut_excerpt_length = _prodcut_excerpt_length | default: 31 -%}
            <div>
               {%- if settings.use_description_full -%}
                  {%- include 'shortcode' load: product.description -%}
               {%-else-%}
                  <p class="p_des_ex">
                     {%- if product.metafields.meta.description_excerpt -%}
                      {{  product.metafields.meta.description_excerpt | strip }}
                    {% elsif product.description contains  '[' %}
                      {% assign pr_des = product.description | split: '[' %}
                      {% assign pr_des = pr_des[1] | split: ']' | first | append:']' | prepend:'[' %}
                      {{ product.description | remove: pr_des | strip_html | truncatewords: prodcut_excerpt_length }}
                    {%-else-%}
                      {{ product.description | strip_html | truncatewords: prodcut_excerpt_length }}
                    {%-endif-%}
                  </p>
               {%-endif-%}
            </div>
            {%- endif -%}
            {%- assign section_settings_countdown = settings.show_countdown -%}
            {%- include 'basel_count_down' -%}
            {%- unless product.options.size == 1 and product.variants[0].title == 'Default Title'-%}
               {%-capture variantSoldout-%}
               {%-for option in product.options_with_values-%}
                   {%-for value in option.values-%}
                     {% if option.selected_value == value %} bg_{{value | handleize}}{% endif-%}
                   {%-endfor-%}
               {%-endfor-%}
               {%-endcapture-%}
            {%-endunless-%}
            {%- if product.metafields.external -%}
               {%- assign check = product.metafields.external | first | last -%}
               {%- if check contains 'https:' or check  contains 'http:' -%}{%- assign check_external = true -%}{%-else-%}{%- assign check_external = false -%}{%-endif-%}
            {%-endif-%}
            {%- if product.has_only_default_variant == false or linklists[product.handle] == empty or linklists[product.handle] == "" -%}<div id="callBackVariant_quick" class="{{variantSoldout}}">{%- endif-%}
                  {%- if settings.catalog_mode == false -%}
                     {%- if settings.product_quantity_message and product.variants.size == 1 and sold_out == false -%}
                           <div id="variantQuantity_quick" class="variant-quantity{%- if current_variant.inventory_management %} show{%- endif -%}" style="margin-top: 20px">
                              {%- if current_variant.inventory_management -%}
                                 {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                    {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                 {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                    {%- assign next_incoming_date = current_variant.next_incoming_date | date: format: 'month_day_year' -%}
                                    {{ 'products.product.will_not_ship_until' | t: date:next_incoming_date }}
                                 {%- endif -%}
                              {%- endif -%}
                           </div>
                           {%- endif -%}
                     {%- if product.variants.size == 1 and sold_out -%}
                        <p class="stock out-of-stock" id="out-of-stock-gl_quick">{{ 'products.product.outofstock' | t }}</p>
                         {%- if settings.product_quantity_message -%}
                           <div id="variantQuantity_quick" class="variant-quantity{%- if current_variant.inventory_management %} show{%- endif -%}">
                              {%- if current_variant.inventory_management -%}
                                 {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                    {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                 {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                    {%- assign next_incoming_date = current_variant.next_incoming_date | date: format: 'month_day_year' -%}
                                    {{ 'products.product.will_not_ship_until' | t: date:next_incoming_date }}
                                 {%- endif -%}
                              {%- endif -%}
                           </div>
                           {%- endif -%}
                     {%- elsif linklists[product.handle] == empty or linklists[product.handle] == "" -%}
                        {%- if check_external and product.variants.size == 1 -%}
                           <p class="cart"><a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a></p>
                        {%- else -%}
                           <form class="add-to-cart-form variations_form cart{%- if settings.show_watch_products %} swatch-color-single{%- endif -%}" method="post" action="/cart/add" enctype="multipart/form-data" id="cart-form-quick" data-product_id="{{product.id}}">
                              <select name="id" id="product-select-quick" class="product-form__variants hide hidden">
                               {%- for variant in product.variants -%}
                               <option  data-sku="{{ variant.sku }}" data-index="{{ forloop.index0 }}" data-option1="bg_{{ variant.option1 | handleize}}" data-option2="bg_{{ variant.option2 | handleize }}" data-option3="bg_{{ variant.option3 | handleize}}" value="{{ variant.id }}"{%- if variant == current_variant %} selected="selected"{%- endif -%}>{{ variant.title }}</option>
                               {%- endfor -%}
                             </select>
                              {%- if product.has_only_default_variant == false and settings.swatch_design != '3' -%}{%- include 'swatch' -%}{%- elsif product.has_only_default_variant == false and settings.swatch_design == '3' -%}{%- include 'swatch_simple' -%}{%- endif -%}
                              {%- if product.variants.size > 1 -%}
                                 <div class="single_variation_wrap">
                                    {%- if product.price_varies -%}
                                    <div class="shopify-variation single_variation">
                                        <div class="shopify-variation-price">
                                          <span class="price" id="productPrice_quick">
                                            {%- if on_sale -%}<del id="old-product-price_quick">{{ current_variant.compare_at_price | money }}</del><ins id="product-price_quick">{{ current_variant.price | money }}</ins>
                                            {%- else -%}
                                            <span id="product-price">{{ current_variant.price | money }}</span> 
                                            {%- endif -%}
                                          </span>
                                        </div>
                                     </div>
                                     {%- endif -%}
                                    {%- if settings.product_quantity_message -%}
                                       <div id="variantQuantity_quick" class="variant-quantity{%- if product.has_only_default_variant and current_variant.inventory_management %} show{%- endif -%}">
                                          {%- if product.has_only_default_variant and current_variant.inventory_management -%}
                                             {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                                {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                             {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                                {{ 'products.product.will_not_ship_until' | t: date: current_variant.next_incoming_date }}
                                             {%- endif -%}
                                          {%- endif -%}
                                       </div>
                                       {%- endif -%}
                                   <div class="shopify-variation-add-to-cart variations_button shopify-variation-add-to-cart-enabled">
                                       <div id="shopify_quantity_quick" class="quantity">
                                          <input type="button" value="-" class="minus">
                                          <input type="number" step="1" min="1" max="{%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != null -%}999{%- elsif current_variant.inventory_management != null -%}{{current_variant.inventory_quantity}}{%- else -%}999{%- endif -%}" name="quantity" value="1" title="Qty" class="input-text qty text" size="4" pattern="[0-9]*" inputmode="numeric">
                                          <input type="button" value="+" class="plus">
                                       </div>
                                       <p class="stock out-of-stock variant_stock" id="out-of-stock-gl_quick" style="display: none">{{ 'products.product.outofstock' | t }}</p>
                                       {% comment %}<input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ get_group_handle }}">{% endcomment %}
                                       {%- if check_external == false -%}
                                          {% if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != '' %}
                                          <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.pre_orders' | t }}</button>
                                          {%- else -%}
                                          <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                                          {%- endif -%}
                                       {%- else -%}
                                       <a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                                       {%- endif -%}
                                    </div>
                                 </div>
                                 {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}{%- include 'product_img_trust_seal',padding_class:'gl_pt_25' -%}{%- endif -%}
                              {%- else -%}
                                 {%- if settings.product_quantity_message -%}
                                    <div id="variantQuantity" class="variant-quantity{%- if product.has_only_default_variant and current_variant.inventory_management %} show{%- endif -%}">
                                       {%- if product.has_only_default_variant and current_variant.inventory_management -%}
                                          {%- if current_variant.inventory_quantity < 10 and current_variant.inventory_quantity > 0 -%}
                                             {{ 'products.product.only_left' | t: count: current_variant.inventory_quantity }}
                                          {%- elsif current_variant.inventory_quantity <= 0 and current_variant.incoming -%}
                                             {{ 'products.product.will_not_ship_until' | t: date: current_variant.next_incoming_date }}
                                          {%- endif -%}
                                       {%- endif -%}
                                    </div>
                                 {%- endif -%}
                                 <div id="shopify_quantity" class="quantity">
                                    <input type="button" value="-" class="minus">
                                    <input type="number" step="1" min="1" max="{%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != null -%}999{%- elsif current_variant.inventory_management != null -%}{{current_variant.inventory_quantity}}{%- else -%}999{%- endif -%}" name="quantity" value="1" title="Qty" class="input-text qty text" size="4" pattern="[0-9]*" inputmode="numeric">
                                    <input type="button" value="+" class="plus">
                                 </div>
                                 <p class="stock out-of-stock variant_stock" id="out-of-stock-gl" style="display: none">{{ 'products.product.outofstock' | t }}</p>
                                 {% comment %}<input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ get_group_handle }}">{% endcomment %}
                                 {%- if check_external == false -%}
                                    {%- if current_variant.inventory_quantity <= 0 and current_variant.available and current_variant.inventory_management != '' -%}
                                     <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.pre_orders' | t }}</button>
                                     {%- else -%}
                                     <button type="submit" id="shopify_add_to_cart_quick" class="add_to_cart_button ajax_form_cart single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                                     {%- endif -%}
                                 {%- else -%}
                                 <a href="{{ check }}" id="shopify_add_to_cart_quick" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                                 {%- endif -%}
                              {%- endif -%}
                           </form>
                        {%- endif -%}
                     {%- else -%}
                        <form class="cart" method="post" enctype="multipart/form-data">
                           <table cellspacing="0" class="group_table">
                              <tbody>
                              {%- include 'product_group' -%}
                              </tbody>
                           </table>
                           <!-- <input required class="required" id="product" type="hidden" name="attributes[product]" value="{{ product.handle }}"> -->
                           {%- if check_external == false -%}
                            <button type="submit" id="multi-variant-add" class="add_to_cart_button single_add_to_cart_button button alt">{{ 'products.product.add_to_cart' | t }}</button>
                           {%- else -%}
                           <a href="{{ check }}" rel="nofollow" class="single_add_to_cart_button button alt">{{ product.metafields.external | first | first }}</a>
                           {%- endif -%}
                        </form>
                        {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}{%- include 'product_img_trust_seal',padding_class:'gl_mb_20' -%}{%- endif -%}
                     {%- endif -%}
               {%- endif -%}
               {%- if settings.use_wishlist and pages['wishlist'].empty? != true -%}{%- include 'gl-wishlist-product' -%}{%- endif -%}
                  <div class="clear"></div>
                  {%- if settings.use_compare and pages['compare'].empty? != true -%}<div class="compare-btn-wrapper{%- if product.variants.size == 1 and sold_out %} gl_mb_25{%- endif -%}"><a href="#compare_popup" class="compare button" data-pid="{{product.handle}}_sp_{{product.id}}" rel="nofollow">{{ 'products.product.compare' | t }}</a></div>{%- endif -%}
                  {%- if settings.product_img_trust_seal and settings.img_trust_seal != blank -%}
                            {%- if product.variants.size == 1 or check_external -%}{%- include 'product_img_trust_seal',padding_class:'gl_pt_15' -%}{%- endif -%}
                           {%- endif -%}
                  <div class="product_meta{%- if check_external %} product_meta_external{%- endif -%}">
                     {%- if settings.show_sku -%}<span class="sku_wrapper">{{ 'products.product.product_sku' | t }} <span class="sku variant-sku" id="product-sku_quick">{%- if current_variant.sku != blank -%}{{current_variant.sku}}{%-else-%}{{ 'products.product.na' | t }}{%-endif-%}</span></span>{%- endif -%}
                     {%- if product.collections.size > 0 and settings.show_category_product -%}
                     <span class="posted_in">{{ 'products.product.product_category' | t }} 
                     {% for collection in product.collections limit:10 -%}
                       {{ collection.title | link_to: collection.url }}{%- unless forloop.last == true -%},{%- endunless %}
                       {%- endfor -%}
                     </span>
                     {%- endif -%}
                     {%- if product.tags.size > 0 and settings.show_tag_product and product.collections.size > 0 -%}
                     <span class="tagged_as">{{ 'products.product.product_tag' | t }}
                        {%- for tag in product.tags limit:10 -%}
                        <a href="{%- if collection != blank -%}{{ collection.url }}{%- else -%}{{ product.collections.first.url }}{%- endif -%}/{{ tag | handle }}">{{ tag | remove:'type ' | remove:'Type ' }}</a>{%- unless forloop.last -%}, {% endunless -%}
                        {%- endfor -%}
                     </span>
                     {%- endif -%}
                  </div>
                  {%- if settings.show_share_btn -%}
                  <div class="product-share">
                     <span class="share-title">{{ 'products.product.product_share' | t }}</span>
                     {%- include 'social-sharing', follow_social:gl_follow_social -%}
                  </div>
                  {%- endif -%}
            {%- if product.has_only_default_variant == false or linklists[product.handle] == empty or linklists[product.handle] == "" -%}</div>{%- endif-%}
        </div>
      </div>
      <!-- .summary -->
    </div>
  </div>
  <!-- .product-quickview end -->
</div>
{%- unless product.variants.size == 1 and sold_out -%}
{% if linklists[product.handle] == blank and product.variants.size > 1 %}
  <script type="text/javascript">
    (function($) {
      "use strict";
      var featured_image_id = null,cout=0;
      var selectCallback = function(variant, selector) {
        var $variantQuantity = $('#variantQuantity_quick'),
            $productPrice = $('#productPrice_quick'),
            $quantityElements = $('#shopify_quantity_quick'),
            $outofstock = $('#out-of-stock-gl_quick'),
            $productsku = $('#product-sku_quick'),
            $input = $('#shopify_quantity_quick input.qty'),
            $addToCart = $('#shopify_add_to_cart_quick');
            {%- if product.has_only_default_variant == false %}
               {%- if product.options.size == 2 -%}
                $('#callBackVariant_quick').attr('class','bg_'+ $('#product-select-quick-option-0').val());
                $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-1').val());
               {%- elsif product.options.size == 3 -%}
                     $('#callBackVariant_quick').attr('class','bg_'+ $('#product-select-quick-option-0').val());
                     $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-1').val());
                     $('#callBackVariant_quick').addClass('bg_' + $('#product-select-quick-option-2').val());
               {%- endif -%}
            {%- endif %}
        if(variant){
          if (variant.available) {
            $addToCart.show();
            $quantityElements.show();
            $outofstock.hide();
            // Show how many items are left, if below 10
            {% if settings.product_quantity_message %}
            if (variant.inventory_management) {
              if (variant.inventory_quantity < 10 && variant.inventory_quantity > 0) {
                $variantQuantity.html({{ 'products.product.only_left' | t: count: '1' | json }}.replace('1', variant.inventory_quantity)).addClass('is-visible');
              } else if (variant.inventory_quantity <= 0 && variant.incoming) {
                $variantQuantity.html({{ 'products.product.will_not_ship_until' | t: date: '[date]' | json }}.replace('[date]', variant.next_incoming_date)).addClass('is-visible');
              } else {
                $variantQuantity.removeClass('is-visible');
              }
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            {% endif %}
            // Update quantity.
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
               $addToCart.html({{ 'products.product.pre_orders' | t | json }});
            }else{
              $addToCart.html({{ 'products.product.add_to_cart' | t | json }});
            }
            if (variant.inventory_quantity <= 0 && variant.available && variant.inventory_management != null){
                         $input.attr('max',999);
                      }
                     else if(variant.inventory_management != null ){
                       //Check if inventory management by shopify
                       $input.attr('max',variant.inventory_quantity).val(1).attr('value',1);
                     }else{
                       $input.attr('max',999);
                     }

          } else {
            $addToCart.hide();
            $variantQuantity.removeClass('is-visible');
            if (variant.incoming) {
              $variantQuantity.html({{ 'products.product.will_be_in_stock_after' | t: date: '[date]' | json }}.replace('[date]', variant.next_incoming_date)).addClass('is-visible');
            }
            else {
              $variantQuantity.removeClass('is-visible');
            }
            $quantityElements.hide();
            $outofstock.show();
            {%- if product.options.size == 2 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 console.log(_index);
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('#callBackVariant_quick [data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#callBackVariant_quick #gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#callBackVariant_quick #gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('#callBackVariant_quick [data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#callBackVariant_quick #gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
          }
           // Update price display.
          var customPrice = Shopify.formatMoney(variant.price, theme.moneyFormat);
          if (variant.compare_at_price > variant.price) {
            var comparePrice = Shopify.formatMoney(variant.compare_at_price, theme.moneyFormat);
            var customPriceFormat = ' <del id="old-product-price_quick">' + comparePrice + '</del>';
                customPriceFormat += ' <ins id="product-price_quick">' + customPrice + '</ins>';
            $productPrice.html(customPriceFormat);
          }else{
             $productPrice.html(customPrice);
          }
          jQuery('.currency .active').trigger('click');
          //Update sku
          if(variant.sku){
             $productsku.text(variant.sku);
          }else{
              $productsku.text(theme.strings.na);
           }
          if(variant.featured_image) {
            featured_image_id = variant.featured_image.id;
            $('#gl_product_quickview').addClass('featured_image').removeClass('not_featured_image');
          }else{
            featured_image_id = '';
            $('#gl_product_quickview').addClass('not_featured_image').removeClass('featured_image');
          }
          
        }else{
            {%- if product.options.size == 2 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                      $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                  {%- if settings.swatch_design == '3' -%}
                 console.log(_index);
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $('#callBackVariant_quick [data-option-index="1"] div.basel-swatch').get(_index).click();
                 {%- endif -%}
               }
            }
            {%- elsif product.options.size == 3 -%}
            if($('#callBackVariant_quick #gl_select_1 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_1 .swatches-select').children(':visible').length != 0) {
                  var _index = $('#callBackVariant_quick #gl_select_1').find('.basel-swatch:visible:first').index(),
                       $this = $('#callBackVariant_quick [data-option-index="1"] .basel-swatch').get(_index);
                 {%- if settings.swatch_design == '3' -%}
                 $this.click();
                 $('#callBackVariant_quick #gl_select_1 .input-dropdown-inner >a').text($($this).children('a').text());
                 {%- else -%}
                 $this.click();
                 {%- endif -%}
               }
            }
            if($('#callBackVariant_quick #gl_select_2 .basel-swatch.active-swatch').css('display') == 'none' ) {
               if($('#callBackVariant_quick #gl_select_2 .swatches-select').children(':visible').length != 0) {
                  var __index = $('#callBackVariant_quick #gl_select_2').find('.basel-swatch:visible:first').index(),
                      _$this = $('#callBackVariant_quick [data-option-index="2"] .basel-swatch').get(__index);
                 {%- if settings.swatch_design == '3' -%}
                 _$this.click();
                 $('#callBackVariant_quick #gl_select_2 .input-dropdown-inner >a').text($(_$this).children('a').text());
                 {%- else -%}
                 _$this.click();
                 {%- endif -%}
               }
            }
            {%- endif -%}
            $productsku.html(theme.strings.na);
        }
      };
      
      {%- include 'json_arr' -%}
      var product = {{ json_arr | strip_newlines | remove:"  "}};
    {%- if settings.product_quantity_message -%}
      {%- for variant in product.variants -%}
        product.variants[{{ forloop.index0}}].incoming = {{ variant.incoming | default: false }};
        product.variants[{{ forloop.index0}}].next_incoming_date = {{ variant.next_incoming_date | date: format: 'month_day_year' | json }};
      {%- endfor -%}
    {%- endif -%}
  
    var optionSelectors = new Shopify.OptionSelectors('product-select-quick', {
      product: product,
      onVariantSelected: selectCallback,
      enableHistoryState: false
    });
    var $variation_form = $('#gl_product_quickview .variations_form');
    $variation_form.on('click', '.swatches-select > .basel-swatch', function(e) {
         e.preventDefault();
         e.stopImmediatePropagation();
        var value = $(this).data('value'),
            id = $(this).parent().data('id'),
            $product = $('.product-quick-view'),
            $thumbs = $('.product-quick-view .product-images-slider_on');
        $variation_form.find('select#product-select-quick-option-' + id).val(value).trigger('change');
        $(this).parent().find('.active-swatch').removeClass('active-swatch');
        $(this).addClass('active-swatch');
          if( $product.hasClass('not_featured_image')) {
            if( $(this).hasClass('bg_color')) {
               var add_image_id = $(this).data('image-id');
            }else {
               var add_image_id = $('#gl_product_quickview .basel-swatch.bg_color.active-swatch').data('image-id');
            }
            var i = $thumbs.find('div:not(.active) img[data-image-id="'+add_image_id+'"]').parents( ".owl-item" ).index();
            $thumbs.trigger('to.owl.carousel', i);
         }else if( $product.hasClass('featured_image')) {
            var _i = $thumbs.find('div:not(.active) img[data-image-id="'+featured_image_id+'"]').parents( ".owl-item" ).index();
            $thumbs.trigger('to.owl.carousel', _i);
         }
    });
    {%- if settings.use_clicking_variant_image -%}
    var $mainOwl = $('.product-images-slider_on');
        $mainOwl.on('dragged.owl.carousel', function(e) {
            var i = e.item.index;
             use_clicking_variant_image(i);
        });
       $mainOwl.on('click','.owl-next,.owl-prev',function(ev) {
              var i = $('.owl-item.active').index();
               use_clicking_variant_image(i)
               //$mainOwl.removeClass('move-next');
         });
        function use_clicking_variant_image(i) {
            var   $this = $mainOwl.find('img').eq(i),
                lenght = $this.data('lenght'),
                one = $this.data('one'),
                two = $this.data('two'),
                three = $this.data('three'),
                value = $this.data('variant_id');
            if (value != undefined) {
               optionSelectors.selectVariant(value);
               {%- if settings.swatch_design != '3' -%}
                  $('#cart-form-quick .basel-swatch.active-swatch').removeClass('active-swatch');
               {%- else -%}
                  $('#cart-form-quick .basel-swatch.active-swatch').removeClass('active-swatch current-item');
               {%- endif -%}
               {%- if product.options.size == 1 -%}
                  {%- if settings.swatch_design != '3' -%}
                   $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                   {%- else -%}
                   $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                   $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                   {%- endif -%}
                {%- elsif product.options.size == 2 -%}
                     {%- if settings.swatch_design != '3' -%}
                       $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                     {%- else -%}
                        $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                        $('#gl_product_quickview #gl_select_1 .input-dropdown-inner >a').text(two);
                        $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                     {%- endif -%}
               {%- elsif product.options.size == 3 -%}
                    {%- if settings.swatch_design != '3' -%}
                       $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch');
                       $('#gl_product_quickview #gl_select_2 [data-value="'+three+'"]').addClass('active-swatch');
                     {%- else -%}
                        $('#gl_product_quickview #gl_select_0 .input-dropdown-inner >a').text(one);
                        $('#gl_product_quickview #gl_select_1 .input-dropdown-inner >a').text(two);
                        $('#gl_product_quickview #gl_select_2 .input-dropdown-inner >a').text(three);
                        $('#gl_product_quickview #gl_select_0 [data-value="'+one+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_1 [data-value="'+two+'"]').addClass('active-swatch current-item');
                        $('#gl_product_quickview #gl_select_2 [data-value="'+three+'"]').addClass('active-swatch current-item');
                     {%- endif -%}
                {%- endif -%}
            }
        };
        
        {%- endif -%}
    }(jQuery));
  </script>
{% elsif linklists[product.handle] != blank %}
  <script>
  jQuery(function($) {
   $( document ).on('click', '#multi-variant-add', function(e) {
      e.preventDefault();
      var $this = $(this);
      $this.attr('disabled', 'disabled').css('pointer-events', 'none').addClass('loading');
      Shopify.queue = [];
      jQuery('.gl_group_quantity').each(function() {
      Shopify.queue.push({
          variantId: jQuery(this).data('variant_id'),
          quantity: parseInt(jQuery(this).val(), 10) || 0
        });
      });
      Shopify.moveAlong = function() {
        // If we still have requests in the queue, let's process the next one.
        console.log(Shopify.queue);
        if (Shopify.queue.length) {
          var request = Shopify.queue.shift();
          $.ajax({
            type: 'POST',
            url: '/cart/add.js',
            data: {quantity: request.quantity, id:request.variantId},
            dataType: 'json',
            success:function(cart) {
              Shopify.moveAlong();
            },
            error: function(XMLHttpRequest, textStatus) {
              $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
              baselThemeModule.onError(XMLHttpRequest, textStatus);
            }
         });
        }
        // If the queue is empty, we will redirect to the cart page.
        else {
          jQuery.get('/cart?view=json', function(data) {
               /*optional stuff to do after success */
               $('.widget_shopping_cart_content').html(data);
            });
           jQuery.getJSON('/cart.js', function(cart) {
              $(".cartCount").html(cart.item_count);
              $(".basel-cart-subtotal >span").html(Shopify.formatMoney(cart.total_price, theme.moneyFormat));
            });
          baselThemeModule.gl_currency();
          baselThemeModule.addToCart();
          $this.removeAttr("disabled").css('pointer-events', 'auto').removeClass("loading");
        }
      };
      Shopify.moveAlong();
    });
  });
  </script>
{% endif %}
{%- endunless -%}
<!--  end product_page_area.liquid -->